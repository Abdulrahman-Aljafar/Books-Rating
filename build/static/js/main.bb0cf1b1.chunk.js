(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,t,a){},137:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),o=a.n(n),r=a(36),s=a.n(r),i=(a(134),a(31)),l=a.n(i),j=a(43),d=a(7),b=a(8),h=a(11),u=a(52),O=(a(136),a(137),a(24)),m=a(10),x=a(274),p=a(272),f=a(268),g=a(121),k=a(122),v=a(9),y=a.n(v);function C(e){var t=Object(h.f)(),a=Object(n.useState)({}),o=Object(d.a)(a,2),r=o[0],s=o[1],i=Object(n.useState)(!0),l=Object(d.a)(i,2),j=l[0],b=l[1],u=Object(n.useState)(!0),v=Object(d.a)(u,2),C=(v[0],v[1]),w=Object(n.useState)(!0),S=Object(d.a)(w,2),I=(S[0],S[1]),B=Object(n.useState)(!0),P=Object(d.a)(B,2),L=P[0],N=P[1],E=Object(n.useState)(!0),G=Object(d.a)(E,2),R=G[0],D=G[1],T=Object(n.useState)(!0),F=Object(d.a)(T,2),A=F[0],U=F[1],_=Object(n.useState)(!0),q=Object(d.a)(_,2),H=(q[0],q[1]),z=function(e){var t=e.target,a=t.name,c=t.value;s(Object(m.a)(Object(m.a)({},r),{},Object(O.a)({},a,c))),"email"==a&&(c.includes("@")?N(!0):N(!1)),"password"==a&&(c.length<=5?D(!1):D(!0))};return Object(c.jsxs)(c.Fragment,{children:[!j&&Object(c.jsx)(x.a,{variant:"danger",children:"The email is already in use. Please change the email"}),!A&&Object(c.jsx)(x.a,{variant:"danger",children:"user type cannot be blank"}),Object(c.jsx)(p.a,{className:"mt-5",children:Object(c.jsx)(f.a,{className:"justify-content-center mt-5",children:Object(c.jsxs)(g.a,{md:6,children:[Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(g.a,{md:6,children:[Object(c.jsx)(p.a.Label,{children:"Full Name"}),Object(c.jsx)(p.a.Control,{placeholder:"Full name",name:"name",onChange:function(e){return z(e)},required:!0})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(g.a,{md:6,children:Object(c.jsxs)(p.a.Group,{controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{htmlFor:"email",children:"Email"}),Object(c.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:function(e){return z(e)},required:!0})]})})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(g.a,{md:6,children:Object(c.jsxs)(p.a.Group,{controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Password"}),Object(c.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",minlength:"5",onChange:function(e){return z(e)},required:!0})]})})}),Object(c.jsx)(p.a.Check,{inline:!0,label:"Reader",type:"radio",name:"utype",id:"Reader",value:"0",onChange:function(e){return z(e)}}),Object(c.jsx)(p.a.Check,{inline:!0,label:"Auther",type:"radio",name:"utype",id:"Auther",value:"1",onChange:function(e){return z(e)}}),Object(c.jsx)("br",{}),Object(c.jsx)(k.a,{variant:"primary",type:"submit",onClick:function(e){return a=e,1==R&&1==L&&(a.preventDefault(),y.a.post("http://localhost:4000/api/users/register",r).then((function(e){e.data.user?t.push("/login"):setTimeout((function(){b(!1)}),1e3)})).catch((function(e){return console.log(e)}))),r.name?C(!0):C(!1),r.email?I(!0):I(!1),r.utype?U(!0):U(!1),void(r.password?H(!0):H(!1));var a},children:"Submit"}),Object(c.jsxs)("p",{children:["u alredy have account ?  ",Object(c.jsx)("a",{href:"/login",children:" log in"})]})]})})})]})}function w(e){var t=Object(h.f)(),a=Object(n.useState)({email:"",password:""}),o=Object(d.a)(a,2),r=o[0],s=o[1],i=Object(n.useState)(!0),l=Object(d.a)(i,2),j=l[0],b=l[1],u=function(e){var t=e.target,a=t.name,c=t.value;s(Object(m.a)(Object(m.a)({},r),{},Object(O.a)({},a,c)))};return Object(c.jsxs)(c.Fragment,{children:[!j&&Object(c.jsx)(x.a,{variant:"danger",children:"The email address or password is incorrect. Please retry..."}),Object(c.jsx)(p.a,{className:"mt-5",children:Object(c.jsx)(f.a,{className:"justify-content-center mt-5",children:Object(c.jsxs)(g.a,{md:8,children:[Object(c.jsxs)(p.a.Row,{children:[Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Email"}),Object(c.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:function(e){return u(e)}})]}),Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Password"}),Object(c.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:function(e){return u(e)}})]})]}),Object(c.jsx)(k.a,{variant:"primary",type:"submit",onClick:function(a){return a.preventDefault(),void y.a.post("http://localhost:4000/api/users/login",r).then((function(a){console.log("Express backend /login response",a);var c=a.data.token,n=a.data.msg;c?(localStorage.setItem("jwtToken",c),e.loginCallback(),t.push("/Home")):(console.log("Login error: ",n),b(!1))}))},children:"Submit"})]})})})]})}var S=a(276);function I(e){return console.log(e.img),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(g.a,{md:"2",sm:"4",children:Object(c.jsxs)(S.a,{className:"cardH",style:{width:"11.1rem",high:"11rem"},children:[Object(c.jsx)(S.a.Img,{variant:"top",src:e.book.bimg,style:{width:"11rem",high:"10em"}}),Object(c.jsxs)(S.a.Body,{children:[Object(c.jsx)(S.a.Title,{children:Object(c.jsx)("h6",{children:e.book.bname})}),Object(c.jsx)(f.a,{children:Object(c.jsxs)(b.b,{to:"/Showbook/".concat(e.book._id),children:[" ",Object(c.jsx)(k.a,{className:"btn1",variant:"outline-secondary",onClick:function(){return e.setSelectbook(e.book)},children:" more info"})," "]})})]})]})})})}function B(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)("All"),i=Object(d.a)(s,2),l=i[0],j=i[1];Object(n.useEffect)((function(){y.a.get("http://localhost:4000/api/books/").then((function(e){console.log(e.data),r(e.data)}))}),[]);var b;return b="All"===l?o.map((function(t,a){return Object(c.jsx)(I,{book:t,setSelectbook:e.setSelectbook})})):o.map((function(t,a){if(t.bcategory===l)return Object(c.jsx)(I,{book:t,setSelectbook:e.setSelectbook})})),Object(c.jsxs)("div",{children:[Object(c.jsx)(p.a,{children:Object(c.jsxs)(p.a.Group,{controlId:"exampleForm.SelectCustom",children:[Object(c.jsx)(p.a.Label,{children:"Type of the movie"}),Object(c.jsxs)(p.a.Control,{onChange:function(e){j(e.target.value)},as:"select",custom:!0,children:[Object(c.jsx)("option",{children:"All"}),Object(c.jsx)("option",{children:"History"}),Object(c.jsx)("option",{children:"Memoir"}),Object(c.jsx)("option",{children:"Politics"}),Object(c.jsx)("option",{children:"Cookbook"}),Object(c.jsx)("option",{children:"Children\u2019s Books"}),Object(c.jsx)("option",{children:"Crime"}),Object(c.jsx)("option",{children:"Art/architecture"}),Object(c.jsx)("option",{children:"Biography"}),Object(c.jsx)("option",{children:"Science"}),Object(c.jsx)("option",{children:"Sports and leisure"}),Object(c.jsx)("option",{children:"Horror"}),Object(c.jsx)("option",{children:"Business/economics"}),Object(c.jsx)("option",{children:"other"})]})]})}),Object(c.jsx)("div",{className:"padding",children:Object(c.jsx)(f.a,{className:"justify-content-md-center",children:b})})]})}function P(){return Object(c.jsx)("div",{children:Object(c.jsx)("section",{className:"section-0",children:Object(c.jsxs)("div",{class:"card-body",style:{paddingLeft:"250PX",paddingTop:"220px"},children:[Object(c.jsx)("h1",{class:"card-title",style:{color:"aliceblue"},children:"Books Stream"}),Object(c.jsxs)("p",{class:"card-text",style:{color:"aliceblue"},children:["is the world\u2019s largest site for readers and book recommendations.",Object(c.jsx)("br",{})," Our mission is to help people find and share books they love."]})]})})})}var L=a(273),N=a(275),E=a(271),G=a(120);function R(e){return Object(c.jsxs)(L.a,{bg:"light",expand:"lg",children:[Object(c.jsx)(L.a.Brand,{as:b.b,to:"/landing",children:"bookStream"}),Object(c.jsx)(N.a.Link,{href:"#home",as:b.b,to:"/Home",style:{color:"gray"},children:"Home"}),e.isLoggedIn?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(L.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(c.jsx)(L.a.Collapse,{id:"responsive-navbar-nav",children:e.data&&"0"==e.data.utype?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(N.a,{children:Object(c.jsxs)(E.a,{title:"Dropdown",id:"basic-nav-dropdown1",children:[Object(c.jsx)(E.a.Item,{as:b.b,to:"/toread",children:"I want to read it"}),Object(c.jsx)(E.a.Item,{as:b.b,to:"/ireadit",children:"i read it"}),Object(c.jsx)(E.a.Item,{as:b.b,to:"/profile",children:"edit profile"}),Object(c.jsx)(E.a.Item,{as:b.b,to:"/home",onClick:function(){console.log("Logging Out!"),localStorage.removeItem("jwtToken"),e.loginCallback()},children:"logout"})]})})}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(N.a,{children:Object(c.jsxs)(E.a,{title:"Dropdown2",id:"basic-nav-dropdown2",children:[Object(c.jsx)(E.a.Item,{as:b.b,to:"/newbook",children:"add new book"}),Object(c.jsx)(E.a.Item,{as:b.b,to:"/mybooks",children:"my books"}),Object(c.jsx)(E.a.Item,{as:b.b,to:"/rofile",children:"edit profile"}),Object(c.jsx)(E.a.Item,{as:b.b,to:"/home",onClick:function(){console.log("Logging Out!"),localStorage.removeItem("jwtToken"),e.loginCallback()},children:"logout"})]})})})}),Object(c.jsx)(N.a,{children:Object(c.jsxs)(p.a,{inline:!0,children:[Object(c.jsx)(G.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(c.jsx)(k.a,{variant:"outline-success",children:"Search"})]})})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(N.a.Link,{as:b.b,to:"/login",children:"LogIn"})," "]})]})}function D(e){var t=Object(h.f)(),a=Object(n.useState)({}),o=Object(d.a)(a,2),r=o[0],s=o[1],i=function(t){var a=t.target,c=(a.user,a.name),n=a.value;s(Object(m.a)(Object(m.a)({},r),{},Object(O.a)({},c,n))),console.log(e.data._id)};return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(p.a,{className:"mt-5",children:Object(c.jsx)(f.a,{className:"justify-content-center mt-5",children:Object(c.jsxs)(g.a,{md:8,children:[Object(c.jsxs)(p.a.Row,{children:[Object(c.jsxs)(g.a,{md:12,children:[Object(c.jsx)(p.a.Label,{children:"Book Name"}),Object(c.jsx)(p.a.Control,{placeholder:"Book name",name:"bname",onChange:function(e){return i(e)}})]}),Object(c.jsx)(g.a,{md:12,children:Object(c.jsxs)(p.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(c.jsx)(p.a.Label,{children:"Example textarea"}),Object(c.jsx)(p.a.Control,{name:"bdescription",onChange:function(e){return i(e)},as:"textarea",rows:3})]})}),Object(c.jsx)(g.a,{md:12,children:Object(c.jsxs)(p.a.Group,{controlId:"exampleForm.SelectCustom",children:[Object(c.jsx)(p.a.Label,{children:"Type of the movie"}),Object(c.jsxs)(p.a.Control,{onChange:function(e){return i(e)},as:"select",name:"bcategory",custom:!0,children:[Object(c.jsx)("option",{children:"History"}),Object(c.jsx)("option",{children:"Memoir"}),Object(c.jsx)("option",{children:"Politics"}),Object(c.jsx)("option",{children:"Cookbook"}),Object(c.jsx)("option",{children:"Children\u2019s Books"}),Object(c.jsx)("option",{children:"Crime"}),Object(c.jsx)("option",{children:"Art/architecture"}),Object(c.jsx)("option",{children:"Biography"}),Object(c.jsx)("option",{children:"Science"}),Object(c.jsx)("option",{children:"Sports and leisure"}),Object(c.jsx)("option",{children:"Horror"}),Object(c.jsx)("option",{children:"Business/economics"}),Object(c.jsx)("option",{children:"other"})]})]})})]}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Release Date"}),Object(c.jsx)(p.a.Control,{type:"Text",placeholder:"Release Date",name:"bReleasDate",onChange:function(e){return i(e)}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Image"}),Object(c.jsx)(p.a.Control,{placeholder:"Image",name:"bimg",onChange:function(e){return i(e)}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Author Name"}),Object(c.jsx)(p.a.Control,{placeholder:"Author Name",name:"bAuthor",onChange:function(e){return i(e)}})]})}),Object(c.jsx)(k.a,{variant:"primary",size:"lg",block:!0,onClick:function(a){return c=a,r.user=e.data._id,console.log(r),c.preventDefault(),void y.a.post("http://localhost:4000/api/books/new",r).then((function(e){t.push("/Home")})).catch((function(e){return console.log(e)}));var c},children:"Save"})]})})})})}function T(e){return console.log(e.img),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(g.a,{md:"1",sm:"4",className:"mt-4 mr-5",children:Object(c.jsxs)(S.a,{className:"cardH",style:{width:"11.1rem",high:"11rem"},children:[Object(c.jsx)(S.a.Img,{variant:"top",src:e.bimg,style:{width:"11rem",high:"10em"}}),Object(c.jsxs)(S.a.Body,{children:[Object(c.jsx)(S.a.Title,{children:e.bname}),Object(c.jsxs)(f.a,{children:[Object(c.jsx)(g.a,{md:e.delete?"5":"12"}),Object(c.jsx)(k.a,{className:"btn1",variant:"outline-danger",onClick:function(){return e.deleteBook(e.id)},children:"Delete"}),Object(c.jsx)(b.b,{to:"/EditBook/".concat(e.id),children:Object(c.jsx)(k.a,{className:"btn1",variant:"link",onClick:function(){return e.setSelectbook(e.book)},children:"Edit Book"})})]})]})]})})})}function F(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],r=a[1],s=e.auth.currentUser,i=(s.name,s.email,s.favoriteBooks1,s._id,function(e){console.log("myyyyyyyyyy"),console.log(" id boooooooooook",e),y.a.delete("http://localhost:4000/api/books/".concat(e)).then((function(t){r(o.filter((function(t){return t._id!=e})))}))});Object(n.useEffect)((function(){y.a.get("http://localhost:4000/api/books/").then((function(e){console.log(e.data),r(e.data)}))}),[]);var l=o.map((function(t,a){if(t.user==e.data._id)return Object(c.jsx)(T,{bimg:t.bimg,bname:t.bname,id:t._id,deleteBook:i,books:t,setSelectbook:e.setSelectbook})}));return Object(c.jsx)("div",{children:Object(c.jsx)(f.a,{className:"justify-content-md-center",children:l})})}var A=a(269);function U(e){var t=Object(h.g)().id,a=Object(n.useState)(e.selectbook),o=Object(d.a)(a,2),r=o[0],s=o[1];Object(n.useEffect)((function(){r.bname||y.a.get("http://localhost:4000/api/books/").then((function(e){var a=e.data.find((function(e){return e._id==t}));s(a)}))}),[]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(A.a,{className:"mt-5",children:Object(c.jsxs)(f.a,{children:[Object(c.jsx)(g.a,{md:"6",children:Object(c.jsx)("img",{width:"100%",src:r.bimg,alt:"",srcset:""})}),Object(c.jsxs)(g.a,{md:"6",children:[Object(c.jsxs)("p",{style:{fontSize:"25px"},children:[Object(c.jsx)("span",{style:{fontWeight:"bold"},children:"Book Name :"}),r.bname]}),Object(c.jsxs)("p",{style:{fontSize:"25px"},children:[Object(c.jsx)("span",{style:{fontWeight:"bold"},children:"Author :"}),r.bAuthor]}),Object(c.jsxs)("p",{style:{fontSize:"25px"},children:[Object(c.jsx)("span",{style:{fontWeight:"bold"},children:"Discription :"}),r.bdescription]}),Object(c.jsxs)("p",{style:{fontSize:"25px"},children:[Object(c.jsx)("span",{style:{fontWeight:"bold"},children:"Category :"}),r.bcategory]}),Object(c.jsxs)("p",{style:{fontSize:"25px"},children:[Object(c.jsx)("span",{style:{fontWeight:"bold"},children:"Realeas Date :"}),r.bReleasDate]}),Object(c.jsx)(k.a,{onClick:function(){return console.log("bookId = ",r._id),console.log("userId = ",e.user._id),void y.a.post("http://localhost:4000/api/books/toread",{bookId:r._id,userId:e.user._id}).then((function(t){e.setAuth((function(e){return Object(m.a)(Object(m.a)({},e),{},{currentUser:Object(m.a)(Object(m.a)({},e.currentUser),{},{favoriteBooks:t.data.favoriteBooks})})})),console.log(t)}))},variant:"outline-secondary",children:" I want to read it "})]})]})})})}function _(e){return console.log(e.img),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(g.a,{md:"3",sm:"4",className:"mt-4 mr-5",children:Object(c.jsxs)(S.a,{className:"card-book",children:[Object(c.jsx)(S.a.Img,{variant:"top",src:e.favBook.bimg,height:"300px",width:"300px",style:{margin:"auto",objectFit:"cover"}}),Object(c.jsxs)(S.a.Body,{children:[Object(c.jsx)(S.a.Title,{children:e.favBook.bname}),Object(c.jsxs)(f.a,{children:[Object(c.jsx)(g.a,{md:e.delete?"5":"12",children:Object(c.jsx)(k.a,{variant:"outline-secondary",onClick:function(){e.addBookIreadit(e.favBook._id),e.deleteBook(e.favBook._id)},className:"outline-light",children:" I read it"})}),Object(c.jsx)(g.a,{md:"3",children:e.delete&&Object(c.jsx)(k.a,{variant:"outline-danger",onClick:function(){return e.deleteBook(e.favBook._id)},children:"delete "})})]})]})]})})})}function q(e){var t=e.auth.currentUser,a=(t.name,t.email,t.favoriteBooks1,t._id),o=Object(n.useState)([]),r=Object(d.a)(o,2),s=r[0],i=r[1],b=function(){var t=Object(j.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("http://localhost:4000/api/users/profile/".concat(e.auth.currentUser._id));case 2:a=t.sent,console.log("get profile",a),y.a.get("http://localhost:4000/api/books/").then((function(e){console.log(">>>>>>> props.user.favoriteBooks: ",a.data.user.favoriteBooks);var t=e.data.filter((function(e){return a.data.user.favoriteBooks.includes(e._id)}));i(t)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)(b,[]);var h=function(e){console.log("myyyyyyyyyy");var t=a;y.a.delete("http://localhost:4000/api/books/".concat(e,"/").concat(t)).then((function(t){var c=localStorage.getItem("userData");JSON.parse(c);localStorage[a]=JSON.stringify(t.data.favoriteBooks),console.log(localStorage[a]),console.log("deleted book",t.data.favoriteBooks),i(s.filter((function(t){return t._id!=e})))}))},u=function(t){console.log("bookId = ",t),console.log("userId = ",e.user._id),y.a.post("http://localhost:4000/api/books/ireadit",{bookId:t,userId:e.user._id}).then((function(t){e.setAuth((function(e){return Object(m.a)(Object(m.a)({},e),{},{currentUser:Object(m.a)(Object(m.a)({},e.currentUser),{},{ireadit:t.data.ireadit})})})),console.log(t)}))},O=s.map((function(e,t){return Object(c.jsx)(_,{favBook:e,deleteBook:h,addBookIreadit:u,delete:!0})}));return Object(c.jsx)("div",{children:Object(c.jsx)(f.a,{className:"justify-content-md-center",children:O})})}function H(e){return e.auth.isLoggedIn?Object(c.jsx)(q,{auth:e.auth,user:e.user,setAuth:e.setAuth}):Object(c.jsx)(h.a,{to:"/"})}function z(e){return console.log(e.img),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(g.a,{md:"3",sm:"4",className:"mt-4 mr-5",children:Object(c.jsxs)(S.a,{className:"card-book",children:[Object(c.jsx)(S.a.Img,{variant:"top",src:e.favBook.bimg,height:"300px",width:"100px",style:{margin:"auto",objectFit:"cover"}}),Object(c.jsxs)(S.a.Body,{children:[Object(c.jsx)(S.a.Title,{children:e.favBook.bname}),Object(c.jsxs)(f.a,{children:[Object(c.jsx)(g.a,{md:e.delete?"5":"12"}),Object(c.jsx)(g.a,{md:"3",children:e.delete&&Object(c.jsx)(k.a,{variant:"outline-danger",onClick:function(){return e.deleteBook(e.favBook._id)},children:"delete "})})]})]})]})})})}function J(e){var t=e.auth.currentUser,a=(t.name,t.email,t.favoriteBooks1,t._id),o=Object(n.useState)([]),r=Object(d.a)(o,2),s=r[0],i=r[1],b=function(){var t=Object(j.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("http://localhost:4000/api/users/profile/".concat(e.auth.currentUser._id));case 2:a=t.sent,console.log("get profile",a),y.a.get("http://localhost:4000/api/books/").then((function(e){console.log(">>>>>>> props.user.favoriteBooks: ",a.data.user.ireadit);var t=e.data.filter((function(e){return a.data.user.ireadit.includes(e._id)}));i(t)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)(b,[]);var h=function(e){var t=a;y.a.delete("http://localhost:4000/api/books/ireadit/".concat(e,"/").concat(t)).then((function(t){var c=localStorage.getItem("userData");JSON.parse(c);localStorage[a]=JSON.stringify(t.data.ireadit),console.log(localStorage[a]),console.log("deleted book",t.data.ireadit),i(s.filter((function(t){return t._id!=e})))}))},u=s.map((function(e,t){return Object(c.jsx)(z,{favBook:e,deleteBook:h,delete:!0})}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"i read"}),u]})}var V=a(118),M=a(270),W=a(19),X=a(38),K=X.a({name:X.b().required("Name is required"),email:X.b().email("Email is invalid").required("Email is required"),password:X.b(),confirmPassword:X.b().test("passwords-match","Passwords must match ",(function(e){return this.parent.password===e})),img:X.b().required("This Field is Required")});function Q(e){Object(h.f)();var t=Object(n.useState)({}),a=Object(d.a)(t,2),o=a[0],r=a[1],s={name:e.userProfile.name,email:e.userProfile.email,password:"",confirmPassword:"",img:e.userProfile.img};console.log("User const ==>",s);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Edit Profile Page "}),e.userProfile.name?Object(c.jsx)(W.d,{initialValues:s,validationSchema:K,onSubmit:function(t){return function(t){var a=e.userProfile._id;y.a.post("http://localhost:4000/api/users/EditProfile/".concat(a),t).then((function(a){console.log("res.data.user from profile update: ",a.data.user),e.setUserProfile(t);var c={name:t.name,email:t.email};r(c)})).catch((function(e){return console.log(e)}))}(t)},children:Object(c.jsx)(W.c,{className:"mt-5",children:Object(c.jsx)(f.a,{className:"justify-content-center mt-5",children:Object(c.jsxs)(g.a,{md:8,children:[Object(c.jsxs)(p.a.Row,{children:[Object(c.jsx)(g.a,{md:4,children:Object(c.jsx)(V.a,{width:171,height:180,name:"img",src:e.userProfile.img,roundedCircle:!0})}),Object(c.jsxs)(g.a,{md:6,children:[Object(c.jsx)(p.a.Label,{children:Object(c.jsx)("h2",{children:o.name?o.name:e.userProfile.name})}),Object(c.jsx)(p.a.Label,{children:o.name?o.email:e.userProfile.email})]})]}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Name"}),Object(c.jsx)(p.a.Control,{as:W.b,type:"Text",name:"name"}),Object(c.jsx)(W.a,{name:"name",render:function(e){return Object(c.jsx)(x.a,{variant:"danger",children:e})}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Email"}),Object(c.jsx)(p.a.Control,{as:W.b,type:"Text",name:"email"}),Object(c.jsx)(W.a,{name:"email",render:function(e){return Object(c.jsx)(x.a,{variant:"danger",children:e})}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Password "}),Object(c.jsx)(p.a.Control,{as:W.b,type:"Password",name:"password"}),Object(c.jsx)(W.a,{name:"password",render:function(e){return Object(c.jsx)(x.a,{variant:"danger",children:e})}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Confirm Password "}),Object(c.jsx)(p.a.Control,{as:W.b,type:"text",name:"confirmPassword"}),Object(c.jsx)(W.a,{name:"confirmPassword",render:function(e){return Object(c.jsx)(x.a,{variant:"danger",children:e})}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Image"}),Object(c.jsx)(p.a.Control,{as:W.b,name:"img"}),Object(c.jsx)(W.a,{name:"img",render:function(e){return Object(c.jsx)(x.a,{variant:"danger",children:e})}})]})}),Object(c.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Save"})]})})})}):Object(c.jsx)(M.a,{animation:"border"})]})}function Y(e){return e.auth.isLoggedIn?Object(c.jsx)(Q,{auth:e.auth,userProfile:e.userProfile,setUserProfile:e.setUserProfile}):Object(c.jsx)(h.a,{to:"/"})}function Z(e){var t=Object(h.g)().id,a=Object(n.useState)(e.selectbook),o=Object(d.a)(a,2),r=o[0],s=o[1],i=(Object(h.f)(),Object(n.useState)(r)),l=Object(d.a)(i,2),j=l[0],b=l[1];Object(n.useEffect)((function(){r||y.a.get("http://localhost:4000/api/books/").then((function(e){var a=e.data.find((function(e){return e._id==t}));s(a),b(a)}))}),[]);var u=function(e){var t=e.target,a=t.name,c=t.value;b(Object(m.a)(Object(m.a)({},j),{},Object(O.a)({},a,c)))};console.log("bokkkkkk jfhkgjhkjgfhgdfh",j),console.log("select bookk ",{selectBook:r});return Object(c.jsx)(c.Fragment,{children:r&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("h1",{children:["book name : ",r.bname]}),Object(c.jsx)(p.a,{className:"mt-5",children:Object(c.jsx)(f.a,{className:"justify-content-center mt-5",children:Object(c.jsxs)(g.a,{md:8,children:[Object(c.jsxs)(p.a.Row,{children:[Object(c.jsxs)(g.a,{md:12,children:[Object(c.jsx)(p.a.Label,{children:"Book Name"}),Object(c.jsx)(p.a.Control,{placeholder:"Book name",name:"bname",defaultValue:r.bname,onChange:function(e){return u(e)},required:!0})]}),Object(c.jsx)(g.a,{md:12,children:Object(c.jsxs)(p.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(c.jsx)(p.a.Label,{children:"Discription"}),Object(c.jsx)(p.a.Control,{name:"bdescription",defaultValue:r.bdescription,onChange:function(e){return u(e)},as:"textarea",rows:3,required:!0})]})}),Object(c.jsx)(g.a,{md:12,children:Object(c.jsxs)(p.a.Group,{controlId:"exampleForm.SelectCustom",children:[Object(c.jsx)(p.a.Label,{children:"Type of the book"}),Object(c.jsxs)(p.a.Control,{value:r.bcategory,onChange:function(e){return u(e)},as:"select",name:"bcategory",custom:!0,required:!0,children:[Object(c.jsx)("option",{children:"History"}),Object(c.jsx)("option",{children:"Memoir"}),Object(c.jsx)("option",{children:"Politics"}),Object(c.jsx)("option",{children:"Cookbook"}),Object(c.jsx)("option",{children:"Children\u2019s Books"}),Object(c.jsx)("option",{children:"Crime"}),Object(c.jsx)("option",{children:"Art/architecture"}),Object(c.jsx)("option",{children:"Biography"}),Object(c.jsx)("option",{children:"Science"}),Object(c.jsx)("option",{children:"Sports and leisure"}),Object(c.jsx)("option",{children:"Horror"}),Object(c.jsx)("option",{children:"Business/economics"}),Object(c.jsx)("option",{children:"other"})]})]})})]}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridEmail",children:[Object(c.jsx)(p.a.Label,{children:"Release Date"}),Object(c.jsx)(p.a.Control,{type:"Text",placeholder:"Release Date",name:"bReleasDate",defaultValue:r.bReleasDate,onChange:function(e){return u(e)},required:!0})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Image"}),Object(c.jsx)(p.a.Control,{placeholder:"Image",name:"bimg",defaultValue:r.bimg,onChange:function(e){return u(e)},required:!0})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:g.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"Author Name"}),Object(c.jsx)(p.a.Control,{placeholder:"Author Name",name:"bAuthor",defaultValue:r.bAuthor,onChange:function(e){return u(e)},required:!0})]})}),Object(c.jsx)(k.a,{variant:"primary",type:"submit",size:"lg",block:!0,onClick:function(e){return function(e,t){e.preventDefault(),console.log("book subbmiitted ");var a=r._id;console.log("book Id ",a),y.a.post("http://localhost:4000/api/books/EditBook/".concat(a),j).then((function(e){console.log("res.data.user from profile update: ",e.data.user);var a={bname:t.bname,bAuthor:t.bAuthor,bimg:t.bimg,bdescription:t.bdescription,bcategory:t.bcategory,bReleasDate:t.bReleasDate,user:t.user};b(a)})).catch((function(e){return console.log(e)}))}(e)},children:"Save"})]})})})]})})}var $=function(){var e=Object(n.useState)({}),t=Object(d.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)({currentUser:null,isLoggedIn:!1}),s=Object(d.a)(r,2),i=s[0],O=s[1],m=Object(n.useState)({}),x=Object(d.a)(m,2),p=x[0],f=x[1],g=Object(n.useState)({}),k=Object(d.a)(g,2),v=(k[0],k[1],Object(n.useState)(!1)),S=Object(d.a)(v,2),I=S[0],L=S[1],N=Object(n.useState)({currentDataUser:null}),E=Object(d.a)(N,2),G=E[0],T=E[1],A=function(){if(localStorage.jwtToken){var e=localStorage.jwtToken,t=Object(u.a)(e,"SECRET").user,a=(Object(u.a)(e,"SECRET").book,Object(u.a)(e,"SECRET").user);O({currentUser:t,isLoggedIn:!0}),T({currentDataUser:a}),_(t)}else O({currentUser:null,isLoggedIn:!1});L(!0),console.log("The current User is: ",i.currentUser),console.log("The current DATA User  ",G.currentDataUser)},_=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("http://localhost:4000/api/users/profile/".concat(t._id));case 2:a=e.sent,c=a.data.user,console.log("Loaded user profile: ",c),f(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(A,[]),Object(n.useEffect)((function(){p.name&&L(!0)}),[p]),Object(c.jsx)(c.Fragment,{children:I?Object(c.jsxs)(b.a,{children:[Object(c.jsx)(R,{isLoggedIn:i.isLoggedIn,data:G.currentDataUser,loginCallback:A}),Object(c.jsx)(h.b,{path:"/login",children:Object(c.jsx)(w,{loginCallback:A})}),Object(c.jsx)(h.b,{path:"/Showbook/:id",children:Object(c.jsx)(U,{setAuth:O,user:G.currentDataUser,selectbook:a})}),Object(c.jsx)(h.b,{path:"/signup",children:Object(c.jsx)(C,{loginCallback:A})}),Object(c.jsx)(h.b,{exact:!0,path:"/Home",children:Object(c.jsx)(B,{setSelectbook:o})}),Object(c.jsx)(h.b,{exact:!0,path:"/EditProfile",children:Object(c.jsx)(Y,{auth:i,userProfile:p,setUserProfile:f})}),Object(c.jsx)(h.b,{exact:!0,path:"/EditBook/:id",children:Object(c.jsx)(Z,{auth:i,setAuth:O,selectbook:a,setSelectbook:o,userProfile:p,setUserProfile:f})}),Object(c.jsx)(h.b,{exact:!0,path:"/NewBook",children:Object(c.jsx)(D,{data:G.currentDataUser})}),Object(c.jsx)(h.b,{exact:!0,path:"/Landing",children:Object(c.jsx)(P,{})}),Object(c.jsx)(h.b,{exact:!0,path:"/Mybooks",children:Object(c.jsx)(F,{auth:i,data:G.currentDataUser,setAuth:O,setSelectbook:o})}),Object(c.jsx)(h.b,{exact:!0,path:"/ireadit",children:Object(c.jsx)(J,{auth:i,user:G.currentDataUser,setAuth:O})}),Object(c.jsx)(h.b,{exact:!0,path:"/toread",children:Object(c.jsx)(H,{auth:i,user:G.currentDataUser,setAuth:O})})]}):Object(c.jsx)(M.a,{animation:"border"})})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,277)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),o(e),r(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root")),ee()}},[[263,1,2]]]);
//# sourceMappingURL=main.bb0cf1b1.chunk.js.map